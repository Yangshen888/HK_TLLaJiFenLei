(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-volunteer-clockin"],{1688:function(i,t,e){"use strict";e.r(t);var n=e("b51a"),a=e.n(n);for(var s in n)"default"!==s&&function(i){e.d(t,i,(function(){return n[i]}))}(s);t["default"]=a.a},1727:function(i,t,e){var n=e("bdae");"string"===typeof n&&(n=[[i.i,n,""]]),n.locals&&(i.exports=n.locals);var a=e("4f06").default;a("74a6042a",n,!0,{sourceMap:!1,shadowMode:!1})},"1c7a":function(i,t,e){"use strict";var n=e("1727"),a=e.n(n);a.a},b51a:function(i,t,e){"use strict";e("99af"),e("26e9"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=e("4d2c"),a=e("4017"),s={data:function(){return{name:"我的名字",bzText:{time:"",address:"",img:"",remarks:""},type:"",r:80,Timer:[{time:"09:00"},{time:"18:00"}],isAm:!1,isPm:!1,amSign:{time:"",address:"",remarks:"",img:""},pmSign:{time:"",address:"",remarks:"",img:""},clickNum:0,is:null,isSign:!1,time:(0,n.formateDate)(new Date,"h:min:s"),date:(0,n.formateDate)(new Date,"Y-M-D"),latitude:"",longitude:"",address:"我的位置",wqInfo:null,allSign:[],signInfo:{mode:"",latitude:"",longitude:"",address:"",time:"",remarks:""},covers:[{id:0,callout:{content:"*****科技有限公司",color:"red",display:"ALWAYS"},latitude:37.788338,longitude:112.557031,iconPath:"../../../static/img/location.png"}],circles:[{latitude:30.23383,longitude:119.7248,radius:80,strokeWidth:1,fillColor:"#7fff0099"}]}},onLoad:function(){var i=(0,a.getSignInfo)();if(void 0!=i){var t=i.main.reverse();this.allSign=t,1==t.length?(0,n.isSameDay)(t[0].nowT)&&(this.isSign=!0,this.isAm=!0,this.allSign=t,this.amSign=t[0]):(t[0]&&(0,n.isSameDay)(t[0].nowT)&&(this.isSign=!0,this.isPm=!0,this.allSign=t,this.pmSign=t[0]),t[1]&&(0,n.isSameDay)(t[1].nowT)&&(this.isSign=!0,this.isAm=!0,this.allSign=t,this.amSign=t[1]))}this.getLocation(),this.getTime()},methods:{togglePopup:function(i){this.type=i},getAdd:function(){if(!this.isAm||!this.isPm){if(!0===this.is){var i=this.covers[0].callout.content;return this.address=i,void(this.signInfo.address=i)}var t=this,e="https://apis.map.qq.com/ws/geocoder/v1/?location=".concat(t.latitude,",").concat(t.longitude,"&key=").concat(a.key);console.log(e),uni.request({url:e,success:function(i){console.log(i.data);var e=i.data;if(0==e.status){if(null===t.is&&(t.address="请检查位置信息！"),!1===t.is){var n=i.data.result.address+i.data.result.formatted_addresses.recommend;t.address=n,t.signInfo.address=n}}else uni.showToast({title:e.message,icon:"none"})}})}},getData:function(){var i=this,t="";uni.request({url:t,success:function(t){var e=t.data;i.covers[0].callout.content=e.name,i.covers[0].latitude=i.circles[0].latitude=e.latitude,i.covers[0].longitude=i.circles[0].longitude=e.longitude,i.r=i.circles.radius=e.r}})},bindDateChange:function(i){this.date=i.target.value},reset:function(){var i=this;uni.showModal({title:"重置本地打卡信息",content:"您确定要重置打卡信息吗？点击确定本地打卡信息会被清除！",success:function(t){if(t.confirm)(0,a.delSignInfo)(),i.isSign=!1,i.isAm=!1,i.isPm=!1,i.allSign=[];else if(t.cancel)return}})},showBz:function(i){this.type="middle-list","amSign"==i?(this.bzText.time=this.amSign.time,this.bzText.address=this.amSign.address,this.bzText.remarks=this.amSign.remarks):"pmSign"==i&&(this.bzText.time=this.pmSign.time,this.bzText.address=this.pmSign.address,this.bzText.remarks=this.pmSign.remarks)},getTime:function(){var i=this;setInterval((function(){i.time=(0,n.formateDate)(new Date,"h:min:s")}),1e3)},getLocation:function(){var i=this;uni.getLocation({type:"wgs84 ",success:function(t){uni.hideLoading(),i.latitude=t.latitude,i.longitude=t.longitude,i.covers[1]={id:1,latitude:t.latitude,longitude:t.longitude,iconPath:"../../static/location.png"};var e=(0,n.pointInsideCircle)([i.latitude,i.longitude],[i.circles[0].latitude,i.circles[0].longitude],i.r/1e5);i.is=e,i.signInfo.latitude=t.latitude,i.signInfo.longitude=t.longitude,i.signInfo.mode=e?"正常打卡":"外勤打卡",i.getAdd()},fail:function(t){uni.hideLoading(),i.address="请检查位置信息！",uni.showToast({title:"请检查位置信息状态！",icon:"none",mask:!0,duration:3e3})}})},clickSign:function(){var i=this,t=this.is;if(null!==t){uni.showLoading({title:"打卡记录中...",mask:!0}),this.signInfo.time=(0,n.formateDate)(new Date,"Y-M-D h:min:s");var e=(0,a.getSignInfo)();void 0!=e?(0,a.addSignInfo)((0,a.getInfo)(this.signInfo),e):(0,a.setSignInfo)((0,a.getInfo)(this.signInfo)),setTimeout((function(){uni.hideLoading();var t=(0,a.getSignInfo)().main;i.allSign=t.reverse(),i.isSign=!0,!1===i.isAm?(i.isAm=!0,i.amSign=i.allSign[0]):(i.isPm=!0,i.pmSign=i.allSign[1]),uni.showToast({title:"打卡成功！"})}),2e3)}else uni.showToast({title:"请检查位置信息状态！",icon:"none",mask:!0,duration:3e3})},openLocation:function(){var i=this;uni.chooseLocation({success:function(t){i.address=t.address,i.signInfo.address=t.address,i.signInfo.latitude=t.latitude,i.signInfo.longitude=t.longitude,i.latitude=t.latitude,i.longitude=t.longitude;var e=(0,n.pointInsideCircle)([i.latitude,i.longitude],[i.circles[0].latitude,i.circles[0].longitude],i.r/1e4);console.log(i.latitude+"---"+i.longitude),console.log(t),i.is=e}})}}};t.default=s},bdae:function(i,t,e){var n=e("24fb");t=n(!1),t.push([i.i,'.map[data-v-7b3834e3]{width:100%;height:260px}.uni-list-cell-left[data-v-7b3834e3]{padding:0 %?30?%}.text-desc[data-v-7b3834e3]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?10?% %?20?%}.colorRed[data-v-7b3834e3]{color:red}.colorGreen[data-v-7b3834e3]{color:#32cd32}.colorYellow[data-v-7b3834e3]{color:#ff0}.colorBlue[data-v-7b3834e3]{color:#007aff}.bgBlue[data-v-7b3834e3]{background-color:#007aff}.bgGreen[data-v-7b3834e3]{background-color:#32cd32}.bgAsh[data-v-7b3834e3]{background-color:#c8c7cc}.uni-timeline[data-v-7b3834e3]{padding:%?30?% %?20?%}.uni-timeline-item-content-t[data-v-7b3834e3]{font-weight:700}.desc-pad[data-v-7b3834e3]{padding:0 %?0?%}.desc-pad .bz[data-v-7b3834e3]{color:#007aff}.desc-pad .bz .icon[data-v-7b3834e3]{color:#007aff}.uni-timeline-last-item .uni-timeline-item-divider[data-v-7b3834e3]{background:#bbb}.CBlue[data-v-7b3834e3]{background-color:#007aff;box-shadow:0 5px 5px #007aff}.CGreen[data-v-7b3834e3]{background-color:#32cd32;box-shadow:0 5px 5px #32cd32}.CAsh[data-v-7b3834e3]{background-color:#c8c7cc;box-shadow:0 5px 5px #c8c7cc}.module[data-v-7b3834e3]{overflow:hidden;margin:%?20?% auto;width:%?220?%;height:%?220?%;border-radius:50%;color:#fff;text-align:center}.module .text[data-v-7b3834e3]{font-size:20px;margin:%?70?% auto %?10?%}.uni-timeline-item .uni-timeline-item-content[data-v-7b3834e3]{width:100%;padding-right:%?20?%}.content-show[data-v-7b3834e3]{width:100%}.sign-title[data-v-7b3834e3]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?30?% %?24?%;border-bottom:%?1?% solid #333}.sign-title .portrait[data-v-7b3834e3]{width:%?100?%;height:%?100?%;line-height:%?100?%;border-radius:50%;background-color:#007aff;color:#fff;font-size:%?28?%;text-align:center}.sign-title .sign-title-l[data-v-7b3834e3]{display:-webkit-box;display:-webkit-flex;display:flex}.sign-title .sign-title-l .text[data-v-7b3834e3]{margin-left:%?20?%}.sign-title .sign-title-l .text .name[data-v-7b3834e3]{font-size:%?32?%}.sign-title .sign-title-l .text .gz[data-v-7b3834e3]{color:#00008b;display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex}.sign-title .sign-title-l .text .gz uni-text[data-v-7b3834e3]{display:inline-block}.sign-title .sign-title-l .text .gz .t1[data-v-7b3834e3]{overflow:hidden; /*超出部分隐藏*/text-overflow:ellipsis; /* 超出部分显示省略号 */white-space:nowrap; /*规定段落中的文本不进行换行 */width:%?166?% /*需要配合宽度来使用*/}.iswq[data-v-7b3834e3]{padding:0 12px;color:#9c3;border:1px solid #9c3;width:26px;height:24px;border-radius:4px;margin-left:%?20?%;display:inline-block}.desc-pad .last[data-v-7b3834e3]{margin-bottom:%?80?%}.relocation[data-v-7b3834e3]{color:#00f}.uni-popup .content .text[data-v-7b3834e3]{color:#666}\r\n/* timeline */.uni-timeline[data-v-7b3834e3]{margin:%?35?% 0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;position:relative}.uni-timeline-item[data-v-7b3834e3]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;position:relative;padding-bottom:%?20?%;box-sizing:border-box;overflow:hidden}.uni-timeline-item .uni-timeline-item-keynode[data-v-7b3834e3]{width:%?160?%;-webkit-flex-shrink:0;flex-shrink:0;box-sizing:border-box;padding-right:%?20?%;text-align:right;line-height:%?65?%}.uni-timeline-item .uni-timeline-item-divider[data-v-7b3834e3]{-webkit-flex-shrink:0;flex-shrink:0;position:relative;width:%?30?%;height:%?30?%;top:%?15?%;border-radius:50%;background-color:#bbb}.uni-timeline-item-divider[data-v-7b3834e3]::before,\r\n.uni-timeline-item-divider[data-v-7b3834e3]::after{position:absolute;left:%?15?%;width:%?1?%;height:100vh;content:"";background:inherit}.uni-timeline-item-divider[data-v-7b3834e3]::before{bottom:100%}.uni-timeline-item-divider[data-v-7b3834e3]::after{top:100%}.uni-timeline-last-item .uni-timeline-item-divider[data-v-7b3834e3]:after{display:none}.uni-timeline-first-item .uni-timeline-item-divider[data-v-7b3834e3]:before{display:none}.uni-timeline-item .uni-timeline-item-content[data-v-7b3834e3]{padding-left:%?20?%}.uni-timeline-last-item .bottom-border[data-v-7b3834e3]::after{display:none}.uni-timeline-item-content .datetime[data-v-7b3834e3]{color:#ccc}\r\n/* 自定义节点颜色 */.uni-timeline-last-item .uni-timeline-item-divider[data-v-7b3834e3]{background-color:#1aad19}',""]),i.exports=t},d2b0:function(i,t,e){"use strict";e.d(t,"b",(function(){return a})),e.d(t,"c",(function(){return s})),e.d(t,"a",(function(){return n}));var n={uniIcon:e("2f00").default},a=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("v-uni-view",{staticClass:"content",staticStyle:{"padding-top":"2rem"}},[e("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0,tourl:"/pages/home/index"}},[e("template",{attrs:{slot:"backText"},slot:"backText"},[i._v("返回")]),e("template",{attrs:{slot:"content"},slot:"content"},[i._v("志愿者打卡")])],2),e("v-uni-view",{staticClass:"page-body"},[e("v-uni-text",{on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.reset.apply(void 0,arguments)}}},[i._v("重置")]),e("v-uni-view",{staticStyle:{"text-align":"center",padding:"20upx 0"}},[i._v("当前位置:"),e("v-uni-text",{on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.openLocation.apply(void 0,arguments)}}},[i._v(i._s(i.address))])],1),e("v-uni-view",{staticClass:"uni-timeline"},[e("v-uni-view",{staticClass:"uni-timeline-item uni-timeline-first-item"},[e("v-uni-view",{staticClass:"uni-timeline-item-divider",style:{background:i.isAm?"#bbb":"#1AAD19"}}),e("v-uni-view",{staticClass:"uni-timeline-item-content"},[e("v-uni-view",[e("v-uni-view",{staticClass:"uni-timeline-item-content-t1"},[i._v("上班时间"+i._s(i.Timer[0].time))]),i.isAm?e("v-uni-view",{staticClass:"desc-pad"},[e("v-uni-view",{staticClass:"time uni-timeline-item-content-t"},[i._v("打卡时间 "+i._s(i.amSign.time.substring(10,16))),"外勤打卡"==i.amSign.mode?e("v-uni-view",{staticClass:"iswq"},[i._v("外勤")]):i._e()],1),e("v-uni-view",[e("uni-icon",{attrs:{type:"location-filled"}}),i._v(i._s(i.amSign.address))],1),e("v-uni-view",{staticClass:"bz last",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.showBz("amSign")}}},[i._v("备注"),e("uni-icon",{style:{color:"rgb(0, 122, 255)"},attrs:{type:"forward"}})],1)],1):e("v-uni-view",{staticClass:"content-show"},[!0===i.is?e("v-uni-view",[e("v-uni-view",{staticClass:"module CBlue",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.clickSign.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"text"},[i._v("上班打卡")]),e("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1)],1):!1===i.is?e("v-uni-view",[e("v-uni-view",{staticClass:"module CGreen",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.clickSign.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"text"},[i._v("外勤打卡")]),e("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1)],1):null===i.is?e("v-uni-view",[e("v-uni-view",{staticClass:"module CAsh"},[e("v-uni-view",{staticClass:"text"},[i._v("请检查位置信息")]),e("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1)],1):i._e()],1)],1)],1)],1),e("v-uni-view",{staticClass:"uni-timeline-item uni-timeline-last-item"},[e("v-uni-view",{staticClass:"uni-timeline-item-divider",style:{background:i.isAm?"#1AAD19":"#bbb"}}),e("v-uni-view",{staticClass:"uni-timeline-item-content"},[e("v-uni-view",[e("v-uni-view",{staticClass:"uni-timeline-item-content-t1"},[i._v("下班时间"+i._s(i.Timer[1].time))]),i.isAm?e("v-uni-view",{staticClass:"desc-pad"},[i.isPm?e("v-uni-view",{staticClass:"desc-pad"},[e("v-uni-view",{staticClass:"time uni-timeline-item-content-t"},[i._v("打卡时间:"+i._s(i.pmSign.time.substring(10,16))),"外勤打卡"==i.pmSign.mode?e("v-uni-view",{staticClass:"iswq"},[i._v("外勤")]):i._e()],1),e("v-uni-view",[e("uni-icon",{attrs:{type:"location-filled"}}),i._v(i._s(i.pmSign.address))],1),e("v-uni-view",{staticClass:"bz last",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.showBz("pmSign")}}},[i._v("备注"),e("uni-icon",{style:{color:"rgb(0, 122, 255)"},attrs:{type:"forward"}})],1)],1):e("v-uni-view",{staticClass:"content-show"},[!0===i.is?e("v-uni-view",[e("v-uni-view",{staticClass:"module CBlue",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.clickSign.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"text"},[i._v("下班打卡")]),e("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1)],1):!1===i.is?e("v-uni-view",[e("v-uni-view",{staticClass:"module CGreen",on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.clickSign.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"text"},[i._v("外勤打卡")]),e("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1)],1):null===i.is?e("v-uni-view",[e("v-uni-view",{staticClass:"module CGreen"},[e("v-uni-view",{staticClass:"text"},[i._v("请检查位置信息")]),e("v-uni-view",{staticClass:"time"},[i._v(i._s(i.time))])],1)],1):i._e()],1)],1):i._e()],1)],1)],1)],1),i._e()],1),e("uni-popup",{attrs:{show:"middle-list"===i.type,position:"middle",mode:"fixed"},on:{hidePopup:function(t){arguments[0]=t=i.$handleEvent(t),i.togglePopup("")}}},[e("v-uni-view",{staticClass:"title",staticStyle:{padding:"20upx 0","font-weight":"bold",width:"100%","text-align":"center","border-bottom":"1px solid #666"}},[i._v("打卡备注")]),e("v-uni-view",{staticClass:"content",staticStyle:{padding:"20upx 10upx",width:"100%"}},[e("v-uni-text",{staticClass:"text"},[i._v("打卡时间:")]),e("v-uni-text",[i._v(i._s(i.bzText.time))]),e("v-uni-view",{staticClass:"text"},[i._v("打卡地点:")]),e("v-uni-view",[i._v(i._s(i.bzText.address))])],1),e("v-uni-view",{staticClass:"content",staticStyle:{padding:"20upx 10upx",width:"100%"}},[e("v-uni-view",[i._v(i._s(i.bzText.remarks))])],1),e("v-uni-view",{staticClass:"bottom",staticStyle:{padding:"20upx 10upx",color:"cadetblue",width:"100%","text-align":"center","border-top":"1px solid #666"},on:{click:function(t){arguments[0]=t=i.$handleEvent(t),i.togglePopup("")}}},[i._v("关闭")])],1)],1)},s=[]},ef3d:function(i,t,e){"use strict";e.r(t);var n=e("d2b0"),a=e("1688");for(var s in a)"default"!==s&&function(i){e.d(t,i,(function(){return a[i]}))}(s);e("1c7a");var o,l=e("f0c5"),d=Object(l["a"])(a["default"],n["b"],n["c"],!1,null,"7b3834e3",null,!1,n["a"],o);t["default"]=d.exports}}]);
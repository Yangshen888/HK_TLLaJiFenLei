{"version":3,"sources":["uni-app:///main.js","webpack:///D:/我的工作目录/work_桐庐垃圾分类/201211_11.43产品/ZHZW-JG-001-0003海看垃圾分类综合管理系统软件/HaikanRefuseClassification.Mobi/test/pages/login/login.vue?7a3f","webpack:///D:/我的工作目录/work_桐庐垃圾分类/201211_11.43产品/ZHZW-JG-001-0003海看垃圾分类综合管理系统软件/HaikanRefuseClassification.Mobi/test/pages/login/login.vue?a19f","webpack:///D:/我的工作目录/work_桐庐垃圾分类/201211_11.43产品/ZHZW-JG-001-0003海看垃圾分类综合管理系统软件/HaikanRefuseClassification.Mobi/test/pages/login/login.vue?67dc","webpack:///D:/我的工作目录/work_桐庐垃圾分类/201211_11.43产品/ZHZW-JG-001-0003海看垃圾分类综合管理系统软件/HaikanRefuseClassification.Mobi/test/pages/login/login.vue?45dd","uni-app:///pages/login/login.vue","webpack:///D:/我的工作目录/work_桐庐垃圾分类/201211_11.43产品/ZHZW-JG-001-0003海看垃圾分类综合管理系统软件/HaikanRefuseClassification.Mobi/test/pages/login/login.vue?0881","webpack:///D:/我的工作目录/work_桐庐垃圾分类/201211_11.43产品/ZHZW-JG-001-0003海看垃圾分类综合管理系统软件/HaikanRefuseClassification.Mobi/test/pages/login/login.vue?a6cd"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACmL;AACnL,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAkrB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmDtsB;AACA;AACA;AACA;AACA,4D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARA,SAEA,yB,CAAA;eAQA,EACA,2CADA,EAEA,IAFA,kBAEA,CACA,SACA,YADA,EAEA,YAFA,EAGA,iBAHA,EAIA,oBAJA,EAKA,KALA,EAMA,SANA,EAOA,2BAPA,EAQA,0CARA,GAUA,CAbA,EAcA,WACA,UADA,sBACA,CADA,EACA,CACA,4BACA,qBACA,CAJA,EAMA,WANA,yBAMA,kBACA,gBACA,mGACA,aACA,uBADA,EAEA,cAFA,GAIA,kCACA,uBADA,EAEA,uBAFA,IAIA,IAJA,CAIA,gBACA,2BACA,0BACA,KACA,mCACA,CAFA,CAEA,WACA;AACA,aAEA,iCACA,6BADA,EAEA,aAFA,IAGA,IAHA,CAGA,gBACA,2BACA,sBACA;AACA;AACA,mDADA;AAEA,iDAFA;AAGA,mDAHA;AAIA,iDAJA;AAKA,mEALA;AAMA,mEANA;AAOA,kDAPA;AAQA,8BARA;AASA,8CATA;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDADA;;AAGA,qBALA;AAMA;AACA;AACA;AACA;AACA;AACA;AACA,4CADA;;AAGA;AACA,mBAhBA;AAiBA;AACA;AACA;AACA;AACA,0CADA;;AAGA;AACA,iBA3BA;;;AA8BA,eAhEA,MAgEA;AACA;AACA,6BADA;AAEA,2CAFA;;AAIA;AACA,aA1EA;AA2EA,WAnFA,MAmFA;AACA;AACA,yBADA;AAEA,uCAFA;;AAIA;AACA,SA9FA;AA+FA,aA/FA,CA+FA;AACA;AACA,uBADA;AAEA,qCAFA;;AAIA,SApGA;AAqGA,OA1GA,MA0GA;AACA;AACA,qBADA;AAEA,+BAFA;AAGA,2BAHA;;AAKA;AACA,KAzHA;AA0HA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA,KApIA;AAqIA,eArIA,uBAqIA,GArIA,EAqIA;AACA;AACA;AACA;AACA,0BADA;AAEA;AACA;AACA;AACA;AACA,8BADA;AAEA;AACA;AACA;AACA;AACA;AACA,oDADA;AAEA,8BAFA;AAGA,mDAHA;AAIA,8DAJA;AAKA,oDALA;AAMA,iCANA;AAOA,4CAPA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCADA;AAEA,2CAFA;AAGA,wCAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEADA;AAEA,iEAFA;AAGA,mEAHA;AAIA;AACA;AACA,kEANA;AAOA,8CAPA;AAQA,4DARA;AASA,8DATA;AAUA,gFAVA;AAWA,iEAXA;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDADA;;AAGA;AACA,+BA/BA,MA+BA;AACA;AACA,6CADA;AAEA,iDAFA;;;AAKA;AACA,6BAzCA;AA0CA;AACA,yBAjDA,MAiDA;AACA;AACA,uCADA;AAEA,wDAFA;AAGA,6CAHA;;AAKA;AACA,uBA1DA;;AA4DA,qBArEA;;AAuEA;AACA,eA5EA;;AA8EA,aA7FA;AA8FA;AACA;AACA,2BADA;AAEA,iCAFA;AAGA,iCAHA;;AAKA,aApGA;;AAsGA,SA3GA;;;AA8GA,KAtPA;AAuPA,kBAvPA,0BAuPA,CAvPA,EAuPA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,iCAFA;AAGA,8BAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDADA;AAEA,iCAFA;AAGA,8BAHA;AAIA,wDAJA;AAKA,8CALA;AAMA,2BANA;AAOA,wBAPA;;AASA;AACA;AACA;AACA,iBAHA;AAIA,eAlBA,MAkBA;AACA;AACA,6BADA;AAEA,qCAFA;;AAIA;AACA,aA1BA;AA2BA,WAnCA;;AAqCA,OAvCA,MAuCA;AACA;AACA,qBADA;AAEA,oCAFA;AAGA,2BAHA;;AAKA;;AAEA,KA5SA,EAdA;;AA4TA;AACA,SA7TA,qBA6TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAHA,MAGA;AACA;AACA;AACA;AACA,GA1UA;AA2UA;AACA;AACA;AACA;;;;;;;;;;AAUA;AACA;;;;;;AAMA,OAnBA;;AAqBA,GAjWA,E;;;;;;;;;;;;;ACzDA;AAAA;AAAA;AAAA;AAAq+B,CAAgB,o2BAAG,EAAC,C;;;;;;;;;;;ACAz/B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=b237504c&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\" style='padding-top:2rem'>\r\n\t\t<view class=\"header\"><image src=\"https://ljfl.hztlcgj.com/image/head4.png\" style=\"width:100%;\"></image></view>\r\n\r\n\t\t<view class=\"list\">\r\n\t\t\t<view class=\"list-call\">\r\n\t\t\t\t<image class=\"img\" src=\"/static/shilu-login/1.png\"></image>\r\n\t\t\t\t<input class=\"biaoti\" v-model=\"phone\" maxlength=\"11\" placeholder=\"请先获取手机号\" disabled=\"true\"/>\r\n\t\t\t</view>\r\n\t\t\t<!-- <view class=\"list-call\">\r\n\t\t\t\t<image class=\"img\" src=\"/static/shilu-login/2.png\"></image>\r\n\t\t\t\t<input class=\"biaoti\" v-model=\"password\" type=\"text\" maxlength=\"32\" placeholder=\"输入密码\" password=\"true\" />\r\n\t\t\t</view> -->\r\n\t\t\t<!-- <view class=\"list-call\">\r\n\t\t\t\t<image class=\"img\" src=\"/static/shilu-login/4.png\"><view class=\"uni-form-item uni-column\">\r\n\t\t\t\t\t<picker @change=\"typeChange\" :range=\"array\">\r\n\t\t\t\t\t\t<label>{{array[jq]}}</label>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t</view></image>\t\t\t\t\r\n\t\t\t</view> -->\r\n\t\t</view>\r\n\r\n\t\t<!-- 记住密码 -->\r\n\t\t<!-- <view class=\" mui-input-row mui-checkbox \">\r\n\t\t\t<checkbox-group @change=\"checkboxChange\">\r\n\t\t\t\t<checkbox id=\"chkRem\" type=\"checkbox\" :checked=\"rememberPsw\" @tap=\"rememberPsw = !rememberPsw\" color=\"#FFCC33\" class=\"RememberCheck\" style=\"transform:scale(0.7)\" />\r\n\t\t\t\t记住密码\r\n\t\t\t</checkbox-group>\r\n\t\t</view> -->\r\n\r\n\t\t<!-- <view class=\"dlbutton\" hover-class=\"dlbutton-hover\" @tap=\"submitlogin()\"><text>登录</text></view> -->\r\n\r\n\t\t<!-- <view class=\"xieyi\">\r\n\t\t\t<navigator url=\"forget\" open-type=\"navigate\">忘记密码</navigator>\r\n\t\t\t<text>|</text>\r\n\t\t\t<navigator url=\"reg\" open-type=\"navigate\">注册账户</navigator>\r\n\t\t</view> -->\r\n\t\t<view>\r\n\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t<button v-if=\"phone.length==11\" class=\"dlbutton\" hover-class=\"dlbutton-hover\" type=\"default\"  open-type=\"getUserInfo\"  @getuserinfo=\"getUserInfo\"  withCredentials=\"true\">微信号授权登录</button>\r\n\t\t\t<button v-if=\"phone<11\" class=\"dlbutton\" hover-class=\"dlbutton-hover\" open-type=\"getPhoneNumber\" @getphonenumber=\"getPhoneNumber\" >获取手机号</button>\r\n\t\t\t<!-- #endif -->\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nvar self;\r\n\r\nvar webapiaddress = null; //链接地址\r\n\r\nimport { mapState, mapMutation } from 'vuex';\r\nimport http from '@/components/utils/http.js';\r\nimport { GetUserInfo } from '@/api/user/userinfo.js';\r\nimport { WXAuth, WXPhone, getWXOpenAuth } from '@/api/appvue.js';\r\nimport { getWechat } from 'api/user/bind.js';\r\n\r\nexport default {\r\n\tcomputed: mapState(['hasLogin']),\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tusername: '',\r\n\t\t\tpassword: '',\r\n\t\t\trememberPsw: true,\r\n\t\t\tarray: ['督导员', '用户'],\r\n\t\t\tjq: 0,\r\n\t\t\tphone:'',\r\n\t\t\tappid: 'wxda982699a0604145',\r\n\t\t\tsecret: 'a070591fca4a02e9502125d8b0a4d87a'\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\ttypeChange(e) {\r\n\t\t\tthis.index=e.target.value;\r\n\t\t\tthis.jq=this.index;\r\n\t\t},\r\n\t\t\r\n\t\tsubmitlogin() {\r\n\t\t\tvar that=this;\r\n\t\t\tif (this.username != '' && this.username != null && (this.password != '' && this.password != null)) {\r\n\t\t\t\tlet opts = {\r\n\t\t\t\t\turl: 'api/oauth/WXAuth',\r\n\t\t\t\t\tmethod: 'post'\r\n\t\t\t\t};\r\n\t\t\t\thttp.httpRequest(opts, {\r\n\t\t\t\t\tusername: this.username,\r\n\t\t\t\t\tpassword: this.password\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\t\tlet token = res.data.data;\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('token', token);\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\thttp.httpTokenRequest({\r\n\t\t\t\t\t\t\t\turl: 'api/v1/account/profile',\r\n\t\t\t\t\t\t\t\tmethod: 'get'\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\t\t\t\tconsole.log(res.data.data);\r\n\t\t\t\t\t\t\t\t\tlet user = {\r\n\t\t\t\t\t\t\t\t\t\tuserName: res.data.data.user_name,\r\n\t\t\t\t\t\t\t\t\t\tuserId: res.data.data.user_guid,\r\n\t\t\t\t\t\t\t\t\t\tuserType: res.data.data.user_type,\r\n\t\t\t\t\t\t\t\t\t\tstate: res.data.data.shop_state,\r\n\t\t\t\t\t\t\t\t\t\tDepartmentName: res.data.data.user_departmentName,\r\n\t\t\t\t\t\t\t\t\t\tDepartmentGuid: res.data.data.user_departmentGuid,\r\n\t\t\t\t\t\t\t\t\t\tRoleName: res.data.data.roleName,\r\n\t\t\t\t\t\t\t\t\t\ttoken: token,\r\n\t\t\t\t\t\t\t\t\t\tidCard:res.data.data.idCard,\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tthis.$store.commit('login', user);\r\n\t\t\t\t\t\t\t\t\tconsole.log(this.$store.state);\r\n\t\t\t\t\t\t\t\t\tthis.$store.state.phone=this.username;\r\n\t\t\t\t\t\t\t\t\tthis.$store.state.userDepartmentName=user.state;\r\n\t\t\t\t\t\t\t\t\t//登录成功将用户名密码存储到用户本地\r\n\t\t\t\t\t\t\t\t\tif (this.rememberPsw) {\r\n\t\t\t\t\t\t\t\t\t\t//用户勾选“记住密码”\r\n\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('username', this.username);\r\n\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('password', this.password);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t//用户没有勾选“记住密码”\r\n\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync('username');\r\n\t\t\t\t\t\t\t\t\t\tuni.removeStorageSync('password');\r\n\t\t\t\t\t\t\t\t\t\tthis.username = '';\r\n\t\t\t\t\t\t\t\t\t\tthis.password = '';\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// if(res.data.data.roleName==\"普通用户\")\r\n\t\t\t\t\t\t\t\t\t// \tthis.$store.state.seltab=2;\r\n\t\t\t\t\t\t\t\t\t// else\r\n\t\t\t\t\t\t\t\t\tconsole.log(33);\r\n\t\t\t\t\t\t\t\t\tGetUserInfo(this.$store.state.userId).then(res=>{\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res.data.data);\r\n\t\t\t\t\t\t\t\t\t\tif(res.data.code==200){\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(res.data.data.a.address==\"\" || res.data.data.a.address==null)\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../YongHu/addinfo'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(22);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$store.state.seltab=1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$store.state.shopid = res.data.data.a.shopUuid;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$store.state.HomeAddressUUID = res.data.data.a.homeAddressUuid;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../home/index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(22);\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.$store.state.seltab=1;\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../home/index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\t\tcontent: res.data.message\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: res.data.message\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(res => {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\tcontent: '网络服务报错，请检查您的网络'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '用户名和密码不能为空',\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tcheckboxChange: function(e) {\r\n\t\t\tconsole.log(e.detail.value.length);\r\n\t\t\tif (e.detail.value.length == 1) {\r\n\t\t\t\t//获取缓存的账号\r\n\t\t\t\tuni.getStorageSync('username', this.username);\r\n\t\t\t\tuni.getStorageSync('password', this.password);\r\n\t\t\t} else {\r\n\t\t\t\tuni.removeStorageSync('username');\r\n\t\t\t\tuni.removeStorageSync('password');\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetUserInfo(res) {\r\n\t\t\tconsole.log(res);\r\n\t\t\tlet that=this;\r\n\t\t\tuni.login({\r\n\t\t\t\tprovider: 'weixin',\r\n\t\t\t\tsuccess: function(loginRes) {\r\n\t\t\t\t\tconsole.log(loginRes);\r\n\t\t\t\t\t// 获取用户信息\r\n\t\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\t\tsuccess: function(infoRes) {\r\n\t\t\t\t\t\t\tconsole.log(infoRes);\r\n\t\t\t\t\t\t\tconsole.log('用户昵称为：' + infoRes.userInfo.nickName);\r\n\t\t\t\t\t\t\tconsole.log(that.phone);\r\n\t\t\t\t\t\t\tlet data={\r\n\t\t\t\t\t\t\t\tencryptedData:infoRes.encryptedData,\r\n\t\t\t\t\t\t\t\tiv:infoRes.iv,\r\n\t\t\t\t\t\t\t\tnickName:infoRes.userInfo.nickName,\r\n\t\t\t\t\t\t\t\tsession_key:uni.getStorageSync('session_key'),\r\n\t\t\t\t\t\t\t\topenid:uni.getStorageSync('openid'),\r\n\t\t\t\t\t\t\t\tphone:that.phone,\r\n\t\t\t\t\t\t\t\tsex:infoRes.userInfo.gender,\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tWXAuth(data).then(res=>{\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\tif(res.data.code==200){\r\n\t\t\t\t\t\t\t\t\tuni.showToast({ title: res.data.message+' 正在登陆....', icon: 'none', mask: true, duration: 3000 });\r\n\t\t\t\t\t\t\t\t\tuni.login({\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet js_code = res.code;\r\n\t\t\t\t\t\t\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tappid: that.appid,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsecret: that.secret,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tjs_code: js_code\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t\t\t\t\t\t\t\tgetWechat(data).then(res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('openid', res.data.data.openid);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('session_key',res.data.data.session_key);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('openid:' + res.data.data.openid);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('session_key:' + res.data.data.session_key);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.data.data.openid != '' && res.data.data.openid != null && res.data.data.openid != undefined) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetWXOpenAuth(res.data.data.openid).then(res => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('最开始:');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet token = res.data.data.tokens;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('token', token);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet user = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserName: res.data.data.user_name,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserId: res.data.data.user_guid,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuserType: res.data.data.user_type,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//DepartmentName: res.data.data.user_departmentName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//DepartmentGuid: res.data.data.user_departmentGuid,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tRoleName: res.data.data.roleName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttoken: token,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tphone: res.data.data.phone,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topenid: res.data.data.openid,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tHomeAddressUUID: res.data.data.homeAddressUUID,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshopid:res.data.data.shop_guid\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.$store.commit('login', user);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//that.$store.state.phone = user.userName;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthat.$store.state.seltab = 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('code=' + res.data.code);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// if (res.data.data.address == '' || res.data.data.address == null) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t\turl: '../YongHu/addinfo'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// \t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// } else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(22);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../home/index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: '登录失败',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: 'Openid获取失败,请重新获取!',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail:function(err){\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\tcontent: '微信授权失败',\r\n\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetPhoneNumber(e) {\r\n\t\t\t//console.log(e);\r\n\t\t\tconsole.log(e.detail.errMsg);\r\n\t\t\tconsole.log(e.detail.iv);\r\n\t\t\tconsole.log(e.detail.encryptedData);\r\n\r\n\t\t\tif (e.detail.errMsg == 'getPhoneNumber:ok') {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tlet js_code = res.code;\r\n\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\tappid: that.appid,\r\n\t\t\t\t\t\t\tsecret: that.secret,\r\n\t\t\t\t\t\t\tjs_code: js_code\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tgetWechat(data).then(res => {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('openid', res.data.data.openid);\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('session_key', res.data.data.session_key);\r\n\t\t\t\t\t\t\t\tconsole.log('openid:' + res.data.data.openid);\r\n\t\t\t\t\t\t\t\tconsole.log('session_key:' + res.data.data.session_key);\r\n\t\t\t\t\t\t\t\tlet data = {\r\n\t\t\t\t\t\t\t\t\tencryptedData: e.detail.encryptedData,\r\n\t\t\t\t\t\t\t\t\tiv: e.detail.iv,\r\n\t\t\t\t\t\t\t\t\tnickName: '',\r\n\t\t\t\t\t\t\t\t\tsession_key: res.data.data.session_key,\r\n\t\t\t\t\t\t\t\t\topenid: res.data.data.openid,\r\n\t\t\t\t\t\t\t\t\tphone: '',\r\n\t\t\t\t\t\t\t\t\tsex: 0\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\tWXPhone(data).then(res => {\r\n\t\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\t\tthat.phone = res.data.data;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\t\t\t\tcontent: '解密用户信息失败'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '获取手机号失败,登录需要手机号',\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t  }\r\n\t},\r\n\t//页面初始加载\r\n\tmounted() {\r\n\t\t//缓存的账号\r\n\t\tconst username = uni.getStorageSync('username');\r\n\t\t//缓存的密码\r\n\t\tconst password = uni.getStorageSync('password');\r\n\t\t//有缓存就赋值给文本没有就清空\r\n\t\tif (username && password) {\r\n\t\t\tthis.username = username;\r\n\t\t\tthis.password = password;\r\n\t\t} else {\r\n\t\t\tthis.username = '';\r\n\t\t\tthis.password = '';\r\n\t\t}\r\n\t},\r\n\tonLaunch: function() {\r\n\t\tuni.getSystemInfo({\r\n\t\t\tsuccess: function(e) {\r\n\t\t\t\tVue.prototype.statusBar = e.statusBarHeight;\r\n\t\t\t\t// #ifndef MP\r\n\t\t\t\tif (e.platform == 'android') {\r\n\t\t\t\t\tVue.prototype.customBar = e.statusBarHeight + 150;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tVue.prototype.customBar = e.statusBarHeight + 145;\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tlet custom = wx.getMenuButtonBoundingClientRect();\r\n\t\t\t\tVue.prototype.customBar = custom.bottom + custom.top - e.statusBarHeight;\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef MP-ALIPAY\r\n\t\t\t\tVue.prototype.customBar = e.statusBarHeight + e.titleBarHeight;\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n};\r\n</script>\r\n\r\n<style>\r\n.mui-checkbox input[type='checkbox']:checked:before {\r\n\tcolor: #fff;\r\n}\r\n\r\n.RememberCheck {\r\n\tmargin-left: 70%;\r\n\tmargin-top: 10px;\r\n\ttext-indent: 10px;\r\n\tcolor: #000;\r\n}\r\n.content {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n}\r\n.header {\r\n\t/* width:161upx;\r\n\theight:161upx;\r\n\tbackground:rgba(63,205,235,1);\r\n\tbox-shadow:0upx 12upx 13upx 0upx rgba(63,205,235,0.47);\r\n\tborder-radius:50%;\r\n\tmargin-top: 30upx;\r\n\tmargin-left: auto;\r\n\tmargin-right: auto; */\r\n}\r\n.header image {\r\n\t/* width:161upx; */\r\n\t/* height:161upx; */\r\n\t/* border-radius:50%; */\r\n\twidth: -webkit-fill-available;\r\n\theight: 160px;\r\n}\r\n\r\n.list {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tpadding-top: 50upx;\r\n\tpadding-left: 70upx;\r\n\tpadding-right: 70upx;\r\n}\r\n.list-call {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: space-between;\r\n\talign-items: center;\r\n\theight: 100upx;\r\n\tcolor: #333333;\r\n\tborder-bottom: 1upx solid rgba(230, 230, 230, 1);\r\n}\r\n.list-call .img {\r\n\twidth: 40upx;\r\n\theight: 40upx;\r\n}\r\n.list-call .biaoti {\r\n\tflex: 1;\r\n\ttext-align: left;\r\n\tfont-size: 32upx;\r\n\tline-height: 100upx;\r\n\tmargin-left: 16upx;\r\n}\r\n\r\n.dlbutton {\r\n\tcolor: #ffffff;\r\n\tfont-size: 34upx;\r\n\twidth: 470upx;\r\n\theight: 100upx;\r\n\tbackground: linear-gradient(-90deg, rgba(63, 205, 235, 1), rgba(188, 226, 158, 1));\r\n\tbox-shadow: 0upx 0upx 13upx 0upx rgba(164, 217, 228, 0.2);\r\n\tborder-radius: 50upx;\r\n\tline-height: 100upx;\r\n\ttext-align: center;\r\n\tmargin-left: auto;\r\n\tmargin-right: auto;\r\n\tmargin-top: 40upx;\r\n}\r\n.dlbutton-hover {\r\n\tbackground: linear-gradient(-90deg, rgba(63, 205, 235, 0.9), rgba(188, 226, 158, 0.9));\r\n}\r\n.xieyi {\r\n\tdisplay: flex;\r\n\tflex-direction: row;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\tfont-size: 30upx;\r\n\tmargin-top: 50upx;\r\n\tcolor: #ffa800;\r\n\ttext-align: center;\r\n\theight: 40upx;\r\n\tline-height: 40upx;\r\n}\r\n.xieyi text {\r\n\tfont-size: 24upx;\r\n\tmargin-left: 15upx;\r\n\tmargin-right: 15upx;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../软件库/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1608021787142\n      var cssReload = require(\"D:/软件库/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}
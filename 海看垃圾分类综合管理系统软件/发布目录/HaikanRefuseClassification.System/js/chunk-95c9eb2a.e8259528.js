(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95c9eb2a"],{"231e":function(e,t,s){},c08e:function(e,t,s){"use strict";s.d(t,"j",function(){return r}),s.d(t,"d",function(){return a}),s.d(t,"k",function(){return n}),s.d(t,"c",function(){return i}),s.d(t,"a",function(){return d}),s.d(t,"i",function(){return l}),s.d(t,"b",function(){return c}),s.d(t,"g",function(){return u}),s.d(t,"h",function(){return m}),s.d(t,"e",function(){return f}),s.d(t,"f",function(){return h});var o=s("66df"),r=function(e){return o["a"].request({url:"person/address/shopInfoImport",method:"post",data:e})},a=function(e){return o["a"].request({url:"person/address/list",method:"post",data:e})},n=function(e){return o["a"].request({url:"person/address/yjExportInfo",method:"post",data:e})},i=function(e){return o["a"].request({url:"person/address/batch",method:"get",params:e})},d=function(e){return o["a"].request({url:"person/address/Create",method:"post",data:e})},l=function(e){return o["a"].request({url:"person/address/getEdit/"+e.guid,method:"get"})},c=function(e){return o["a"].request({url:"person/address/edit",method:"post",data:e})},u=function(e){return o["a"].request({url:"person/address/huoqushequ",method:"post",data:e})},m=function(e){return o["a"].request({url:"base/household/huoqushequ?guid="+e,method:"get",data:e})},f=function(e){return o["a"].request({url:"person/address/GetFamily?vill="+e.vill,method:"get"})},h=function(e){return o["a"].request({url:"person/address/GetFamily1?vill="+e.vill,method:"get"})}},eacc:function(e,t,s){"use strict";var o=s("231e"),r=s.n(o);r.a},f06b:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Card",[s("dz-table",{attrs:{totalCount:e.stores.addressif.query.totalCount,pageSize:e.stores.addressif.query.pageSize},on:{"on-page-change":e.handlePageChanged,"on-page-size-change":e.handlePageSizeChanged}},[s("div",{attrs:{slot:"searcher"},slot:"searcher"},[s("section",{staticClass:"dnc-toolbar-wrap"},[s("Row",{attrs:{gutter:16}},[s("Col",{attrs:{span:"16"}},[s("Form",{attrs:{inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[s("FormItem",[s("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择街道"},on:{"on-change":e.xz},model:{value:e.stores.addressif.query.kw,callback:function(t){e.$set(e.stores.addressif.query,"kw",t)},expression:"stores.addressif.query.kw"}},e._l(this.stores.addressif.sources.town,function(t){return s("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}),1),s("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择社区"},on:{"on-change":e.sq},model:{value:e.stores.addressif.query.kw1,callback:function(t){e.$set(e.stores.addressif.query,"kw1",t)},expression:"stores.addressif.query.kw1"}},e._l(this.stores.addressif.sources.college,function(t){return s("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}),1),s("Select",{staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"请选择小区"},on:{"on-change":e.gongyu},model:{value:e.stores.addressif.query.kw3,callback:function(t){e.$set(e.stores.addressif.query,"kw3",t)},expression:"stores.addressif.query.kw3"}},e._l(this.stores.addressif.sources.resregion,function(t){return s("Option",{key:t,attrs:{value:"全部"==t?0:t}},[e._v(e._s(t))])}),1),s("Input",{staticStyle:{width:"400px"},attrs:{type:"text",search:"",clearable:!0,placeholder:"关键字查询,空格隔开"},on:{"on-search":function(t){return e.handleSearchDispatch()}},model:{value:e.stores.addressif.query.kw2,callback:function(t){e.$set(e.stores.addressif.query,"kw2",t)},expression:"stores.addressif.query.kw2"}})],1)],1)],1),s("Col",{staticClass:"dnc-toolbar-btns",attrs:{span:"8"}},[s("Button",{directives:[{name:"can",rawName:"v-can",value:"yjexport",expression:"'yjexport'"}],attrs:{icon:"ios-cloud-upload",type:"warning",title:"一键生成所查地址二维码",loading:e.loading},on:{click:e.selectYjexportInfo}},[(e.loading,s("span",[e._v("一键导出所有")]))]),s("Button",{directives:[{name:"can",rawName:"v-can",value:"create",expression:"'create'"}],attrs:{icon:"md-create",type:"primary",title:"添加地址"},on:{click:e.handleShowCreateWindow}},[e._v("添加地址")]),s("Button",{directives:[{name:"can",rawName:"v-can",value:"import",expression:"'import'"}],attrs:{icon:"ios-cloud-upload",type:"success",title:"导入地址信息"},on:{click:e.handleImportUserInfo}},[e._v("导入地址信息")]),s("Button",{directives:[{name:"can",rawName:"v-can",value:"ewmexport",expression:"'ewmexport'"}],attrs:{icon:"ios-cloud-upload",type:"warning",title:"导出"},on:{click:function(t){return e.handleExportInfo("export")}}},[e._v("二维码导出")]),s("ButtonGroup",{staticClass:"mr3"},[s("Button",{attrs:{icon:"md-refresh",title:"刷新"},on:{click:e.handleRefresh_Address}})],1)],1)],1)],1)]),s("Table",{ref:"tables",attrs:{slot:"table",border:!1,size:"small","highlight-row":!0,data:e.stores.addressif.data,columns:e.stores.addressif.columns,"row-class-name":e.rowClsRender_Address},on:{"on-select":e.handleSelect,"on-selection-change":e.handleSelectionChange,"on-refresh":e.handleRefresh_Address,"on-page-change":e.handlePageChanged,"on-page-size-change":e.handlePageSizeChanged,"on-sort-change":e.handleSortChange},slot:"table",scopedSlots:e._u([{key:"state",fn:function(t){var o=t.row;t.index;return[s("span",[e._v(e._s(e.CheckState(o.state)))])]}},{key:"action",fn:function(t){var o=t.row;t.index;return[s("Tooltip",{attrs:{placement:"top",content:"编辑",delay:1e3,transfer:!0}},[s("Button",{directives:[{name:"can",rawName:"v-can",value:"edit",expression:"'edit'"}],attrs:{type:"primary",size:"small",shape:"circle",icon:"md-create"},on:{click:function(t){return e.handleEdit(o)}}})],1)]}}])})],1)],1),s("Drawer",{attrs:{title:"地址信息导入",width:"600","mask-closable":!0,mask:!0},model:{value:e.formimport.opened,callback:function(t){e.$set(e.formimport,"opened",t)},expression:"formimport.opened"}},[s("div",[s("input",{ref:"inputer",attrs:{id:"upload",type:"file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},on:{change:e.importfxx}}),s("Button",{directives:[{name:"can",rawName:"v-can",value:"model",expression:"'model'"}],attrs:{icon:"ios-cloud-download",type:"warning",title:"地址信息导入模板"},on:{click:e.handleimportmodel}},[e._v("地址信息导入模板")]),s("Button",{attrs:{icon:"md-checkmark-circle",type:"primary",disabled:e.importdisable},on:{click:e.handleimport}},[e._v("导入")]),s("Tabs",{attrs:{value:"name1"}},[s("TabPane",{attrs:{label:"成功",name:"name1"},domProps:{innerHTML:e._s(e.successmsg)}}),s("TabPane",{attrs:{label:"重复",name:"name2"},domProps:{innerHTML:e._s(e.repeatmsg)}}),s("TabPane",{attrs:{label:"失败",name:"name3"},domProps:{innerHTML:e._s(e.defaultmsg)}})],1)],1)]),s("Drawer",{attrs:{title:"添加单条地址信息",width:"500","mask-closable":!1,mask:!0},model:{value:e.formMode2.opened,callback:function(t){e.$set(e.formMode2,"opened",t)},expression:"formMode2.opened"}},[s("Form",{ref:"formdispatch",attrs:{model:e.formMode2.fields,rules:e.formMode2.rules,"label-position":"top"}},[s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"地址信息",prop:"address"}},[s("Input",{attrs:{placeholder:"地址信息"},model:{value:e.formMode2.fields.address,callback:function(t){e.$set(e.formMode2.fields,"address",t)},expression:"formMode2.fields.address"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"地址编号",prop:"addresscode"}},[s("Input",{attrs:{placeholder:"地址编号"},model:{value:e.formMode2.fields.addresscode,callback:function(t){e.$set(e.formMode2.fields,"addresscode",t)},expression:"formMode2.fields.addresscode"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"街道",prop:"town"}},[s("Input",{attrs:{placeholder:"街道"},model:{value:e.formMode2.fields.town,callback:function(t){e.$set(e.formMode2.fields,"town",t)},expression:"formMode2.fields.town"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"社区",prop:"ccmmunity"}},[s("Input",{attrs:{placeholder:"社区"},model:{value:e.formMode2.fields.ccmmunity,callback:function(t){e.$set(e.formMode2.fields,"ccmmunity",t)},expression:"formMode2.fields.ccmmunity"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"小区",prop:"resregion"}},[s("Input",{attrs:{placeholder:"小区"},model:{value:e.formMode2.fields.resregion,callback:function(t){e.$set(e.formMode2.fields,"resregion",t)},expression:"formMode2.fields.resregion"}})],1)],1)],1),s("div",{staticClass:"demo-drawer-footer"},[s("Button",{attrs:{icon:"md-checkmark-circle",type:"primary"},on:{click:e.handleSubmitConsumable}},[e._v("保 存")]),s("Button",{staticStyle:{"margin-left":"30px"},attrs:{icon:"md-close"},on:{click:function(t){e.formMode2.opened=!1}}},[e._v("取 消")])],1)],1),s("Drawer",{attrs:{title:"修改地址信息",width:"500","mask-closable":!1,mask:!1},model:{value:e.formModel.opened,callback:function(t){e.$set(e.formModel,"opened",t)},expression:"formModel.opened"}},[s("Form",{ref:"formCarDispatchDetail",attrs:{model:e.formModel.fields,"label-position":"left"}},[s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"地址信息"}},[s("Input",{model:{value:e.formModel.fields.address,callback:function(t){e.$set(e.formModel.fields,"address",t)},expression:"formModel.fields.address"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"地址编号"}},[s("Input",{model:{value:e.formModel.fields.addresscode,callback:function(t){e.$set(e.formModel.fields,"addresscode",t)},expression:"formModel.fields.addresscode"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"街道",prop:"town"}},[s("Input",{attrs:{placeholder:"街道"},model:{value:e.formModel.fields.town,callback:function(t){e.$set(e.formModel.fields,"town",t)},expression:"formModel.fields.town"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"社区",prop:"ccmmunity"}},[s("Input",{attrs:{placeholder:"社区"},model:{value:e.formModel.fields.ccmmunity,callback:function(t){e.$set(e.formModel.fields,"ccmmunity",t)},expression:"formModel.fields.ccmmunity"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"小区",prop:"resregion"}},[s("Input",{attrs:{placeholder:"小区"},model:{value:e.formModel.fields.resregion,callback:function(t){e.$set(e.formModel.fields,"resregion",t)},expression:"formModel.fields.resregion"}})],1)],1)],1),s("div",{staticClass:"demo-drawer-footer"},[s("Button",{attrs:{icon:"md-checkmark-circle",type:"primary"},on:{click:e.btnClickEdit}},[e._v("保 存")]),s("Button",{staticStyle:{"margin-left":"30px"},attrs:{icon:"md-close"},on:{click:function(t){e.formModel.opened=!1}}},[e._v("取 消")])],1)],1)],1)},r=[],a=(s("ac6a"),s("4f7f"),s("5df3"),s("1c4c"),s("55dd"),s("96cf"),s("3b8d")),n=(s("7f7f"),s("bd86")),i=(s("c4e3"),s("21a6"),s("dc44")),d=s("c08e"),l=s("f121"),c={name:"homeaddress",components:{DzTable:i["a"]},data:function(){return{commands:{export:{name:"export",title:"导出"}},loading:!1,list33:[],family:[],url:l["a"].baseUrl.dev,importdisable:!1,successmsg:"",repeatmsg:"",defaultmsg:"",formimport:{opened:!1},formModel:{selection:[],opened:!1,mode:"edit",fields:{addresscode:"",address:"",homeAddressUuid:"",id:"",resregion:"",town:"",ccmmunity:""}},formMode2:{opened:!1,title:"创建申请",mode:"create",selection:[],fields:{addresscode:"",address:"",resregion:"",town:"",ccmmunity:""},rules:{address:[{type:"string",required:!0,message:"请输入地址"}],town:[{type:"string",required:!0,message:"请输入街道"}],ccmmunity:[{type:"string",required:!0,message:"请输入社区"}]}},formModel3:{opened:!1,title:"创建申请",mode:"",selection:[],fields:{towns:"",vname:"",villageId:""}},stores:{addressif:Object(n["a"])({query:{totalCount:0,pageSize:20,currentPage:1,isDeleted:0,status:-1,kw:"",kw1:"",kw2:"",kw3:"",vuuid:this.$store.state.user.villageGuid,vill:this.$store.state.user.streets,sort:[{direct:"DESC",field:"ID"}]},data:[],sources:{college:["全部"],town:["全部"],resregion:["全部"]},columns:[{type:"selection",width:50,key:"handle"},{title:"详细地址",key:"address",minWidth:400,sortable:!0},{title:"地址编码",key:"addresscode",minWidth:200,sortable:!0},{title:"操作",align:"center",fixed:"right",width:80,className:"table-command-column",slot:"action"}]},"data",[]),xxx2:{}},styles:{}}},computed:{formTitle:function(){return""},selectRowsId:function(){return this.formModel.selection.map(function(e){return e.homeAddressUuid})}},methods:{loadListAddress:function(){var e=this;this.loading=!1,Object(d["d"])(this.stores.addressif.query).then(function(t){e.stores.addressif.data=t.data.data,e.stores.addressif.query.totalCount=t.data.totalCount})},handleExportInfo:function(e){var t=this;!this.selectRowsId||this.selectRowsId.length<=0?this.$Message.warning("请选择至少一条数据"):this.$Modal.confirm({title:"操作提示",content:"<p>确定要生成并 ["+this.commands[e].title+"] 当前已选地址的家庭码?</p>",loading:!0,onOk:function(){t.doExportInfoCommand(e)}})},doExportInfoCommand:function(e){var t=this;Object(d["c"])({command:e,ids:this.selectRowsId.join(",")}).then(function(e){if(200===e.data.code){var s=e.data.data;window.location=t.url+s,t.$Message.success(e.data.message),t.loadListAddress()}else t.$Message.warning(e.data.message);t.$Modal.remove()})},selectYjexportInfo:function(){var e=this;this.loading=!0,Object(d["k"])(this.stores.addressif.query).then(function(t){var s=t.data.data;window.location=e.url+s,e.loadListAddress(),e.$Message.success("一键导出成功")})},handleImportUserInfo:function(){this.successmsg="",this.repeatmsg="",this.defaultmsg="",this.$refs.inputer.value="",this.isexitexcel=!1,this.formimport.opened=!0},handleimportmodel:function(){window.location.href=this.url+"UploadFiles/ImportUserInfoModel/地址信息导入模板.xlsx"},importfxx:function(e){var t=this.$refs.inputer,s=new FormData,o=t.files[0],r=".xls|.xlsx|",a=o.name.substring(o.name.lastIndexOf(".")).toLowerCase();"-1"==r.indexOf(a+"|")?(this.$refs.inputer.value="",this.$Message.warning("文件格式不正确!")):null!=o&&void 0!=o?(this.isexitexcel=!0,s.append("excelFile",o),this.exceldata=s):this.isexitexcel=!1},handleimport:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.importdisable=!0,this.successmsg="",this.repeatmsg="",this.defaultmsg="",!this.isexitexcel){e.next=9;break}return e.next=7,Object(d["j"])(this.exceldata).then(function(e){200==e.data.code?(t.time=e.data.data.time,t.successmsg=e.data.data.successmsg,t.repeatmsg=e.data.data.repeatmsg,t.defaultmsg=e.data.data.defaultmsg,t.loadListAddress()):t.$Message.warning(e.data.message),t.$refs.inputer.value="",t.exceldata=new FormData,t.isexitexcel=!1});case 7:e.next=10;break;case 9:this.$Message.warning("请选择文件");case 10:this.importdisable=!1;case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleShowCreateWindow:function(){this.handleSwitchFormModeToCreate(),this.handleOpenFormWindow(),this.handleResetFormDispatch(),this.formMode2.fields.realName=this.$store.state.user.userName},handleSwitchFormModeToCreate:function(){this.formMode2.mode="create"},docreateCarDispatch:function(){var e=this;""!=this.formMode2.fields.town?""!=this.formMode2.fields.ccmmunity?(console.log(this.formModel.fields),Object(d["a"])(this.formMode2.fields).then(function(t){200===t.data.code?(e.$Message.success(t.data.message),e.handleCloseFormWindow(),e.loadListAddress()):e.$Message.warning(t.data.message)})):this.$Message.warning("请输入所属社区"):this.$Message.warning("请输入所属街道")},handleSubmitConsumable:function(){var e=this.validateDispatchForm();e&&"create"===this.formMode2.mode&&this.docreateCarDispatch()},validateDispatchForm:function(){var e=this,t=!1;return this.$refs["formdispatch"].validate(function(s){s?t=!0:e.$Message.error("请完善表单信息")}),t},handleOpenFormWindow:function(){this.formMode2.opened=!0},handleResetFormDispatch:function(){this.$refs["formdispatch"].resetFields()},handleCloseFormWindow:function(){this.formMode2.opened=!1},handleEdit:function(e){this.handleOpenFormWindow1(),this.handleSwitchFormModeToEdit(),this.handleResetFormDispatch1(),this.doLoadEditData(e.homeAddressUuid)},handleSwitchFormModeToEdit:function(){this.formModel.mode="edit"},doLoadEditData:function(e){var t=this;Object(d["i"])({guid:e}).then(function(e){t.formModel.fields=e.data.data})},doEditShopDispatch:function(){var e=this;""!=this.formModel.fields.town?""!=this.formModel.fields.ccmmunity?Object(d["b"])(this.formModel.fields).then(function(t){200===t.data.code?(e.$Message.success(t.data.message),e.handleCloseFormWindow1(),e.loadListAddress()):e.$Message.warning(t.data.message)}):this.$Message.warning("请输入所属社区"):this.$Message.warning("请输入所属街道")},btnClickEdit:function(){this.doEditShopDispatch()},handleResetFormDispatch1:function(){this.$refs["formCarDispatchDetail"].resetFields()},handleOpenFormWindow1:function(){this.formModel.opened=!0},handleCloseFormWindow1:function(){this.formModel.opened=!1},rowClsRender_Address:function(e,t){},handleRefresh_Address:function(){this.loadListAddress()},handleSelect:function(e,t){},handleSelectionChange:function(e){this.formModel.selection=e},handleSortChange:function(e){this.stores.addressif.query.sort.direction=e.order,this.stores.addressif.query.sort.field=e.key,this.loadVoteinitiateList()},handleSearchDispatch:function(){this.loadListAddress()},handlePageChanged:function(e){this.stores.addressif.query.currentPage=e,this.loadListAddress()},handlePageSizeChanged:function(e){this.stores.addressif.query.pageSize=e,this.loadListAddress()},loadDepartmentList1:function(){var e=this;Object(d["h"])().then(function(t){e.list33=t.data.data;var s=Array.from(new Set(e.list33.map(function(e){return e.towns})));e.stores.addressif.sources.town=s})},xz:function(e){var t=this.list33.filter(function(t){return t.towns==e});this.stores.addressif.sources.college=t.map(function(e){return e.vname}),this.loadListAddress()},sq:function(e){var t=this;"全部"==e&&(this.stores.addressif.query.kw1=""),Object(d["e"])({vill:e}).then(function(e){t.family=e.data.data;for(var s=0;s<t.family.length;s++)null==t.family[s].resregion&&null!=t.family[s].street&&(t.family[s].resregion=t.family[s].street);var o=Array.from(new Set(t.family.map(function(e){return e.resregion})));o=o.filter(function(e){return null!=e}),t.stores.addressif.sources.resregion=o,0==t.stores.addressif.sources.resregion.length&&(t.stores.addressif.sources.resregion=["全部"]),console.log(t.stores.addressif.sources.resregion)}),this.loadListAddress()},gongyu:function(e){"全部"==e&&(this.stores.addressif.query.kw3=""),this.loadListAddress()},Is_xxx:function(e){var t="未知";return t},CheckState:function(e){return 0==e?"否":1==e?"是":void 0},dateToString:function(e){var t=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),r=e.getHours(),a=e.getMinutes(),n=e.getSeconds();return t+"-"+s+"-"+o+" "+r+":"+a+":"+n}},mounted:function(){this.loadDepartmentList1(),this.loadListAddress()}},u=c,m=(s("eacc"),s("2877")),f=Object(m["a"])(u,o,r,!1,null,null,null);t["default"]=f.exports}}]);